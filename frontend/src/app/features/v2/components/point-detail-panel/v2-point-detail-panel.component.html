<div class="panel-backdrop" *ngIf="open" (click)="close()">
  <section class="panel glass glass-strong scrollable" (click)="$event.stopPropagation()">
    <div class="panel-header">
      <div class="min-w-0">
        <h4 class="text-base font-semibold text-[var(--text)] break-words">{{ analyteLabel || analyteKey }}</h4>
        <p class="text-xs text-[var(--text-dim)] break-words">{{ analyteKey }}</p>
      </div>
      <button type="button" class="close-btn" (click)="close()">
        <span class="material-symbols-rounded">close</span>
      </button>
    </div>

    <div class="panel-body" *ngIf="point as selectedPoint">
      <div class="row">
        <span class="label">Date</span>
        <span class="value">{{ formatDate(selectedPoint.t) }}</span>
      </div>
      <div class="row">
        <span class="label">Value</span>
        <span class="value">{{ formatValue(selectedPoint) }}</span>
      </div>
      <div class="row" *ngIf="statusLabel">
        <span class="label">Status</span>
        <span class="value">{{ statusLabel }}</span>
      </div>
      <div class="row">
        <span class="label">Page</span>
        <span class="value">{{ selectedPoint.page ?? '-' }}</span>
      </div>
      <div class="row row-column">
        <span class="label">Evidence</span>
        <pre class="evidence">{{ selectedPoint.evidence || '-' }}</pre>
      </div>
      <div class="row row-column">
        <span class="label">Doctor notes</span>
        <div *ngIf="doctorNotes.length; else noDoctorNotes" class="notes-list">
          <div class="note-item" *ngFor="let note of doctorNotes">
            <p class="note-meta">
              {{ note.doctor_name || ('Doctor #' + note.doctor_id) }} â€¢ {{ formatDate(note.updated_at) }}
            </p>
            <p class="note-text">{{ note.note }}</p>
          </div>
        </div>
        <ng-template #noDoctorNotes>
          <p class="notes-empty">{{ emptyDoctorNotesLabel }}</p>
        </ng-template>
      </div>
    </div>
  </section>
</div>
