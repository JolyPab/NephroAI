<div class="auth-shell">
  <app-glass-card [extraClass]="'w-full max-w-xl glass-strong space-y-6'">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl sm:text-3xl font-semibold text-[var(--text)]">{{ 'COMMON.APP_NAME' | translate }}</h1>
        <p class="text-sm text-[var(--text-dim)]">
          {{ mode === 'login' ? ('AUTH.WELCOME_LOGIN' | translate) : ('AUTH.WELCOME_REGISTER' | translate) }}
        </p>
      </div>
      <button type="button" appGlassButton (click)="toggleMode()">
        <span class="material-symbols-rounded">{{ mode === 'login' ? 'person_add' : 'login' }}</span>
        <span>{{ mode === 'login' ? ('AUTH.SWITCH_TO_REGISTER' | translate) : ('AUTH.SWITCH_TO_LOGIN' | translate) }}</span>
      </button>
    </div>

    <form *ngIf="mode === 'login'" [formGroup]="loginForm" (ngSubmit)="submitLogin()" class="space-y-5">
      <app-glass-input
        [label]="'AUTH.EMAIL' | translate"
        [placeholder]="'AUTH.EMAIL_PLACEHOLDER' | translate"
        type="email"
        formControlName="email">
      </app-glass-input>
      <app-glass-input
        [label]="'AUTH.PASSWORD' | translate"
        [placeholder]="'AUTH.PASSWORD_PLACEHOLDER' | translate"
        type="password"
        formControlName="password">
      </app-glass-input>

      <div *ngIf="errorMessage" class="toast-glass error" role="alert">
        <span class="material-symbols-rounded">error</span>
        <span>{{ errorMessage }}</span>
      </div>

      <button type="submit" appGlassButton [glassBlock]="true" [disabled]="isSubmitting">
        <span *ngIf="isSubmitting" class="loader-dot"></span>
        <span>{{ isSubmitting ? ('AUTH.SIGNING_IN' | translate) : ('AUTH.SIGN_IN_BUTTON' | translate) }}</span>
      </button>
    </form>

    <form *ngIf="mode === 'register'" [formGroup]="registerForm" (ngSubmit)="submitRegister()" class="space-y-5">
      <app-glass-input
        [label]="'AUTH.FULL_NAME' | translate"
        [placeholder]="'AUTH.FULL_NAME_PLACEHOLDER' | translate"
        type="text"
        formControlName="full_name">
      </app-glass-input>
      <app-glass-input
        [label]="'AUTH.EMAIL' | translate"
        [placeholder]="'AUTH.EMAIL_PLACEHOLDER' | translate"
        type="email"
        formControlName="email">
      </app-glass-input>
      <app-glass-input
        [label]="'AUTH.PASSWORD' | translate"
        [placeholder]="'AUTH.PASSWORD_MIN_PLACEHOLDER' | translate"
        type="password"
        formControlName="password">
      </app-glass-input>
      <app-glass-input
        [label]="'AUTH.CONFIRM_PASSWORD' | translate"
        [placeholder]="'AUTH.CONFIRM_PASSWORD_PLACEHOLDER' | translate"
        type="password"
        formControlName="confirmPassword">
      </app-glass-input>

      <div class="flex flex-col gap-2">
        <label class="text-xs uppercase tracking-[0.2em] text-[var(--text-dim)]">{{ 'AUTH.ROLE' | translate }}</label>
        <select class="input-glass" formControlName="role">
          <option value="PATIENT">{{ 'AUTH.PATIENT' | translate }}</option>
          <option value="DOCTOR">{{ 'AUTH.DOCTOR' | translate }}</option>
        </select>
      </div>

      <div *ngIf="errorMessage" class="toast-glass error" role="alert">
        <span class="material-symbols-rounded">error</span>
        <span>{{ errorMessage }}</span>
      </div>

      <button type="submit" appGlassButton [glassBlock]="true" [disabled]="isSubmitting">
        <span *ngIf="isSubmitting" class="loader-dot"></span>
        <span>{{ isSubmitting ? ('AUTH.CREATING' | translate) : ('AUTH.CREATE_BUTTON' | translate) }}</span>
      </button>
    </form>
  </app-glass-card>
</div>
